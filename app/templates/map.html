{% extends "base.html" %}
{% block head_scripts %}

        <!--  Leaflet.draw-master  -->
        <script src="/static/leaflet.js"></script>
        <link rel="stylesheet" href="/static/leaflet.css" />

        <!-- D3 and JQuery -->
        <script src="/static/js/jquery-1.11.0.js"></script>  <!-- | JQUERY -->
        <!-- <script src="/static/js/jquery-ui-1.11.4.js"></script> -->  <!-- JQUERY UI -->
        <script src = "/static/js/d3.js"></script>

        <!-- LOCATE CONTROL -->
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

        <!-- HEAT MAP -->
    <!--
        <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-heat/v0.1.0/leaflet-heat.js'></script>
    -->
        <!-- <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-heat/v0.1.3/leaflet-heat.js'></script> -->

        <!-- Font Awesome CSS -->
        <link rel="stylesheet" href="/static/font-awesome-4.3.0/css/font-awesome.min.css">


        <link rel="stylesheet" href="/static/mapClient.css" />       


{% endblock %}
{% block content %}

        {% csrf_token %}

        <div class="container-fluid">
            <div class="row">
                <div id='map'> </div>
            </div>
        </div>

        <script>

            var map;
            var username = "{{ username|safe }}";

            $(function(){

                map = L.map('map', {maxZoom: 23});

                L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png',{ 
                    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'
                }).addTo(map);

                map.setView( [0,0], 1 );

            });


 
    function sendZoneInfo(){
        var payload = {
            uuid: "zone1",
            outlets_used: 5,
            csrfmiddlewaretoken: '{{ csrf_token|safe }}'
        }
        $.ajax({
            type: "POST",
            async: true,
            data:  JSON.stringify(payload),
            url: "/api/v1/zone",
            dataType: 'JSON',
            success: function (data) {
                console.log(data)
            },
            error: function(xhr,errmsg,err) {
                throw new Error(errmsg);
            }
        });



}

        </script>

{% endblock %}

